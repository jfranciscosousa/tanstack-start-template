#!/bin/sh

# Vitest watch mode script
# This script runs unit tests in watch mode

set -e  # Exit on error

# Load environment variables (test script - uses .env.test if it exists, otherwise .env)
if [ -f ".env.test" ]; then
    ENV_FILE=.env.test . bin/load-env
else
    ENV_FILE=.env . bin/load-env
fi

echo "ðŸ‘€ Running unit tests in watch mode..."

# Generate Prisma client for tests
echo "ðŸ“¦ Generating Prisma client..."
pnpm prisma generate

# Run Vitest in watch mode
NODE_ENV=test pnpm vitest

echo "âœ… Vitest watch mode ended"